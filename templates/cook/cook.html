<!DOCTYPE html>

<html lang="ja">

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, width=device-width">

        <!-- http://getbootstrap.com/docs/5.1/ -->
        <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
        <script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"></script>
        <link rel="stylesheet" href="cook.css">
        <!--<link href="/static/styles.css" rel="stylesheet">-->

        <title>Cook</title>

    </head>

    <body>

        <header>
          
        </header>
        

        <main>
            <div class="container">
                <div class="row">
                  <div class="col">
                    <form action="/cook" method="post"> 
                        <div class="form-group">
                          <h3 class="mb-3">買った食材</h3>
                          <div id="input_fields">
                            <input type="text" class="form-control mb-1" id="food"  placeholder="食材名" name="food_1">
                            <input type="number" class="form-control mb-3" id="number" placeholder="個数" min="0" name="number_1">
                          </div>
                          <button type="button" class="btn btn-info my-3" onclick="AddInputField()">食材を追加</button>
                        </div>
                        <button type="submit" class="btn btn-primary">登録</button>
                    </form>
                    <div class="container">
                        <h3>AIによる料理の提案</h3>
                        <p class="my-3">{{message}}</p>
                    </div>
                  </div>
                  <div class="col">
                    <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">食材名</th>
                            <th scope="col">個数</th>
                          </tr>
                        </thead>
                        <tbody>
                        {% for ingredient in ingredients %}
                          <tr>
                            <td>{{ingredient['name']}}</td>
                            <td>{{ingredient['number']}}</td>
                          </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                  </div>
                </div>
            </div>
        </main>

        <footer>
          
        </footer>
        <script>
            function AddInputField(){
                var input_fields_div = document.getElementById("input_fields");
                var input_field_num = input_fields_div.getElementsByTagName("input").length / 2 + 1; //2つのinputフィールドがあるため、2で割る
                var food_input_field = document.createElement("input");
                var number_input_field = document.createElement("input");
                food_input_field.setAttribute("type", "text");
                food_input_field.setAttribute("class", "form-control mb-1");
                food_input_field.setAttribute("id", "food_" + input_field_num);
                food_input_field.setAttribute("placeholder", "食材名");
                food_input_field.setAttribute("name", "food_" + input_field_num);
                number_input_field.setAttribute("type", "number");
                number_input_field.setAttribute("class", "form-control mb-3");
                number_input_field.setAttribute("id", "number_" + input_field_num);
                number_input_field.setAttribute("placeholder", "個数");
                number_input_field.setAttribute("name", "number_" + input_field_num);
                number_input_field.setAttribute("min", 0);
                input_fields_div.appendChild(food_input_field);
                input_fields_div.appendChild(number_input_field);
            }
        </script>

    </body>

</html>